<dx-data-grid
  width="100%"
  showColumnLines="true"
  showBorders="true"
  height="91vh"
  (onRowRemoving)="removeOpertion($event)"
  (onToolbarPreparing)="onToolbarPreparing($event)"
  (onCellPrepared)="onCellPrepared($event)"
  [showColumnLines]="true"
  [showRowLines]="true"
  [showBorders]="true"
  [rowAlternationEnabled]="true"
  [allowColumnResizing]="true"
  [allowColumnReordering]="true"
  [dataSource]="operations">

  <div *dxTemplate="let data of 'dateBox'">
    <dx-date-box
      id="dateBoxOperation"
      [(value)]="monthYear"
      (onValueChanged)="onValueChanged($event)"
      displayFormat="monthAndYear">
      <dxo-calendar-options maxZoomLevel="year" minZoomLevel="decade" zoomLevel="year"></dxo-calendar-options>
    </dx-date-box>
  </div>

  <dxo-editing
    mode="popup"
    [allowUpdating]="true"
    [allowDeleting]="true">
  </dxo-editing>
  <dxo-column-chooser [enabled]="true"></dxo-column-chooser>
  <dxo-state-storing [enabled]="true" type="localStorage" storageKey="storage"></dxo-state-storing>
  <dxo-filter-row
    [visible]="true">
  </dxo-filter-row>
  <dxo-header-filter
    [visible]="true">
  </dxo-header-filter>
  <dxo-search-panel
    [visible]="true"
    [highlightCaseSensitive]="true">
  </dxo-search-panel>
  <dxo-group-panel
    [visible]="true">
  </dxo-group-panel>

  <dxi-column dataField="operationDate" dataType="date" [caption]="formatMessage('Date', null)"></dxi-column>
  <dxi-column dataField="category.title" [caption]="formatMessage('Category', null)"></dxi-column>
  <dxi-column dataField="category.parent.title" [caption]="formatMessage('Subcategory', null)"></dxi-column>
  <dxi-column dataField="description" [caption]="formatMessage('Description', null)"></dxi-column>
  <dxi-column dataField="account.name" [caption]="formatMessage('Account name', null)"></dxi-column>
  <dxi-column dataField="amount" [format]="{type: 'currency', precision: 2}"  [caption]="formatMessage('Amount', null)"></dxi-column>

<!--  <dxo-grouping [autoExpandAll]="true"></dxo-grouping>-->

<!--  <dxo-summary>-->
<!--    <dxi-group-item-->
<!--      column="plan"-->
<!--      summaryType="sum"-->
<!--      valueFormat="currency"-->
<!--      [showInGroupFooter]="false"-->
<!--      [alignByColumn]="true">-->
<!--    </dxi-group-item>-->
<!--    <dxi-group-item-->
<!--      column="real"-->
<!--      summaryType="sum"-->
<!--      valueFormat="currency"-->
<!--      [showInGroupFooter]="false"-->
<!--      [alignByColumn]="true">-->
<!--    </dxi-group-item>-->
<!--    <dxi-group-item-->
<!--      column="difference"-->
<!--      summaryType="sum"-->
<!--      valueFormat="currency"-->
<!--      [alignByColumn]="true"-->
<!--      [showInGroupFooter]="false">-->
<!--    </dxi-group-item>-->
<!--  </dxo-summary>-->
</dx-data-grid>

<dx-speed-dial-action
  hint="Dodaj operacjÄ™"
  (onClick)="addOperation()"
  icon="add">
</dx-speed-dial-action>
<app-add-operation (refreshGrid)="refreshGridData()"></app-add-operation>
